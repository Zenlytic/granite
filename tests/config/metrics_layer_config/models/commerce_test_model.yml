version: 1
type: model
name: test_model
label: "Test commerce data"
connection: testing_snowflake

mappings: 
  source: 
    fields: [sessions.utm_source, orders.sub_channel]
    group_label: "Marketing"
    description: "The source the customer came to our site from"
  campaign: 
    fields: [sessions.utm_campaign, orders.campaign]
  gross_revenue: 
    fields: [order_lines.total_item_revenue, orders.total_revenue]
    description: "Gross revenue (product revenue + shipping - taxes)"

access_grants:
  - name: test_access_grant_department_view
    user_attribute: department
    allowed_values: ["finance", "executive", "sales"]
  - name: test_access_grant_department_customers
    user_attribute: department
    allowed_values: ["executive", "marketing", "sales"]
  - name: test_access_grant_department_field
    user_attribute: department
    allowed_values: ["executive", "engineering", 'sales']
  - name: test_access_grant_department_dashboard
    user_attribute: department
    allowed_values: ["executive", 'sales']
